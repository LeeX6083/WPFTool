<Window x:Class="LogViewer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Log Viewer" Height="600" Width="1000">
   
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- 顶部工具栏 -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="10">
            <ui:TextBox x:Name="FilePathTextBox" Width="300"/>
            <ui:Button Content="导入日志" Click="BrowseButton_Click" Foreground="Black"/>
            <ComboBox Width="100">
                <ComboBoxItem Content="1 Day"/>
                <ComboBoxItem Content="3 Days"/>
                <ComboBoxItem Content="1 Week"/>
                <ComboBoxItem Content="1 Month"/>
            </ComboBox>
            <TextBox Width="200" Text="{Binding SearchText}"/>
            <Button Content="Search" Command="{Binding SearchCommand}"/>
        </StackPanel>

        <!-- 主内容区域 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧统计面板 -->
            <!--<lvc:PieChart Grid.Column="0" Series="{Binding LogLevelStatistics}" LegendLocation="Bottom" Margin="10" Height="300" Width="300"/>-->

            <!-- 右侧日志列表 -->
            <DataGrid Grid.Column="1" ItemsSource="{Binding Logs}" AutoGenerateColumns="False" Margin="10"
                      CanUserAddRows="False" CanUserDeleteRows="False"
                      ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="创建时间" Binding="{Binding Timestamp, StringFormat='yyyy-MM-dd HH:mm:ss.ffff'}"/>
                    <DataGridTextColumn Header="类型" Binding="{Binding Level}"/>
                    <DataGridTextColumn Header="线程ID" Binding="{Binding ThreadId}"/>
                    <DataGridTextColumn Header="模块" Binding="{Binding Module}"/>
                    <DataGridTextColumn Header="版本" Binding="{Binding Version}"/>
                    <DataGridTextColumn Header="服务" Binding="{Binding Method}"/>
                    <DataGridTextColumn Header="内容" Binding="{Binding Content}" Width="*"/>
                </DataGrid.Columns>
               
            </DataGrid>
        </Grid>

        <!-- 底部状态栏 -->
        <StatusBar Grid.Row="2">
            <StatusBarItem Content="{Binding StatusMessage}"/>
        </StatusBar>
        <!-- 分页控件 -->
        <StackPanel Orientation="Horizontal" Grid.Row="2" HorizontalAlignment="Center" Margin="10">
            <Button Content="上一页" Command="{Binding PreviousPageCommand}" Margin="5"/>
            <TextBlock Text="{Binding CurrentPage}" VerticalAlignment="Center" Margin="5"/>
            <TextBlock Text="/" VerticalAlignment="Center" Margin="5"/>
            <TextBlock Text="{Binding TotalPages}" VerticalAlignment="Center" Margin="5"/>
            <Button Content="下一页" Command="{Binding NextPageCommand}" Margin="5"/>
            <TextBlock Text="总数：" VerticalAlignment="Center" Margin="5"/>
            <TextBlock Text="{Binding TotalCount}" VerticalAlignment="Center" Margin="5"/>
        </StackPanel>
    </Grid>
</Window>